; PlatformIO Project Configuration File
; ESP32-Test - Version Légère

[platformio]
default_envs = esp32s3_n16r8 ; Changez selon votre carte (esp32s3_n8r8, esp32devkitc)

; Optional: auto environment helper
; Run `python scripts/auto_env.py upload` to auto-detect and upload
; or `python scripts/auto_env.py monitor` to auto-detect and monitor

[env]
framework = arduino
monitor_speed = 115200
upload_speed = 921600
build_flags = 
    -D CORE_DEBUG_LEVEL=1
    -D PROJECT_VERSION_MAJOR=0
    -D PROJECT_VERSION_MINOR=1
    -D PROJECT_VERSION_PATCH=1

; --- Environnement ESP32-S3 N16R8 (16MB Flash / 8MB PSRAM OPI) ---
[env:esp32s3_n16r8]
platform = espressif32@^6.5.0
board = esp32-s3-devkitc-1
board_build.flash_mode = qio
board_build.flash_size = 16MB
board_build.partitions = huge_app.csv
board_build.arduino.memory_type = qio_opi
board_build.psram = enabled
build_flags = 
    ${env.build_flags} 
    -D BOARD_HAS_PSRAM
    -D ARDUINO_USB_CDC_ON_BOOT=1

; --- Environnement ESP32-S3 N8R8 (8MB Flash / 8MB PSRAM QSPI) ---
[env:esp32s3_n8r8]
platform = espressif32@^6.5.0
board = esp32-s3-devkitc-1
board_build.flash_size = 8MB
board_build.partitions = huge_app.csv
board_build.psram = enabled
build_flags = 
    ${env.build_flags} 
    -D BOARD_HAS_PSRAM
    ; Attention : selon la variante N8R8, USB CDC peut être requis ou non.
    ; Activez-le si vous utilisez le port USB natif pour le log.
    ; -D ARDUINO_USB_CDC_ON_BOOT=1 

; --- Environnement ESP32 Classique (4MB Flash / No PSRAM) ---
[env:esp32devkitc]
platform = espressif32@^6.5.0
board = esp32dev
board_build.flash_size = 4MB
board_build.partitions = default.csv